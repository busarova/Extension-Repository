<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments :: head">
</head>
<body>
<div th:replace="fragments :: header">
</div>

<div class="alignTextCenter">

<h1>USER PAGE</h1>

<a th:if="${image == null}" class="profilePic"> <img src="/pics/icons/user_default.png" height="120"> </a>
<a th:unless="${image == null}" href="#" id="profilePic"><img th:src="*{'data:image/png;base64,'+image}" alt="" height="120"></a>

<div class="alignTextCenter">
           <form id="profilePicForm" th:action="@{/user/changePic}" enctype="multipart/form-data" method="post">
               <p >Attach File: <input type="file" name="fileUpload" size="50" /></p>
               <input type="submit" value="Submit" />
           </form>
</div>

<br>

Name: <span sec:authentication="name" />
<br>

<a th:href="@{/}"><button>HOME</button></a>

<a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin}"><button>ADMIN</button></a>
<br>

<p><a th:href="@{/user/create-extension}">Create extension</a></p>
<p><a href="#" class="profilePic">Change pic</a></p>

<br>
<h2>Current extensions:</h2>


<!-- <div th:each="Extension : ${extensions}">
<br>
<a th:href="'/extension-details/'+${Extension.getId()}"><p th:text="${Extension.getName()}"></p> </a>
<p th:text="' status: ' + ${Extension.isItApproved()}"></p>
</div>
-->


<div class="alignTextCenter">
                <div class="w3-dropdown-hover">
                  <button class="w3-button">Sort By</button>
                  <div class="w3-dropdown-content w3-bar-block w3-border">
                    <a href="/user/sortby/name" class="w3-bar-item w3-button">Name</a>
                    <a href="/user/sortby/uploadDate" class="w3-bar-item w3-button">Upload Date</a>
                    <a href="/user/sortby/downloads" class="w3-bar-item w3-button">Downloads</a>
                    <a href="/user/sortby/lastCommitDate" class="w3-bar-item w3-button">Commit Date</a>
                  </div>
                </div>


                <a href="/user/sortby/featured"><button class="w3-button">Show Featured</button></a>


</div>

<hr>




<div th:each="Extension : ${extensions}" class="col-lg-4 col-sm-4">

            <div class="circular">
                <a th:href="'/extension-details/'+${Extension.getId()}">
                                     <a th:href="'/extension-details/'+${Extension.getId()}" th:if="${Extension.getUploadFile().getLogoData() == null}" class="profilePic"><img src="/pics/icons/ext_default.jpg" width="25%" height="10%"> </a>
                                     <a th:href="'/extension-details/'+${Extension.getId()}" th:unless="${Extension.getUploadFile().getLogoData() == null}" href="#" id="profilePic"><img th:src="*{'data:image/png;base64,'+Extension.getUploadFile().encodeLogoToString()}" alt="" width="25%" height="10%"></a>
                                     <h4 th:text="${Extension.getName()}"></h4>
                                     <p th:text="' status: ' + ${Extension.isItApproved()}"></p>
                                     </a>

            </div>

</div>




</div>

</body>
<div th:replace="fragments :: scripts"></div>
</html>